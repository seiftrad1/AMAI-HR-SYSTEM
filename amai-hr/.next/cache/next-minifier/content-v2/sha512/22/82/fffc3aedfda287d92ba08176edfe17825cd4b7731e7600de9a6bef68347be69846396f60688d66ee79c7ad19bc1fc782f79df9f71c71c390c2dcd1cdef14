{"code":"_N_E=(window.webpackJsonp_N_E=window.webpackJsonp_N_E||[]).push([[20],{\"094J\":function(e,t,r){\"use strict\";(function(e){var n=r(\"q1tI\"),a=r(\"puqk\"),o={},c=function(e,t,r){return o[e]||(o[e]={callbacks:[],value:r}),o[e].callbacks.push(t),{deregister:function(){var r=o[e].callbacks,n=r.indexOf(t);n>-1&&r.splice(n,1)},emit:function(r){o[e].value!==r&&(o[e].value=r,o[e].callbacks.forEach((function(e){t!==e&&e(r)})))}}};t.a=function(t,r){if(void 0===r&&(r=e.localStorage),r){var o=(u=r,{get:function(e,t){var r=u.getItem(e);return null===r?\"function\"==typeof t?t():t:JSON.parse(r)},set:function(e,t){u.setItem(e,JSON.stringify(t))}});return function(e){return function(e,t,r){var o=r.get,u=r.set,i=Object(n.useRef)(null),s=Object(n.useState)((function(){return o(t,e)})),f=s[0],l=s[1];return Object(a.a)(\"storage\",(function(e){var r=e.key,n=JSON.parse(e.newValue);r===t&&f!==n&&l(n)})),Object(n.useEffect)((function(){return i.current=c(t,l,e),function(){i.current.deregister()}}),[]),Object(n.useEffect)((function(){u(t,f),i.current.emit(f)}),[f]),[f,l]}(e,t,o)}}var u;return n.useState}}).call(this,r(\"yLpj\"))},\"4e9g\":function(e,t,r){\"use strict\";r.d(t,\"a\",(function(){return w})),r.d(t,\"b\",(function(){return x})),r.d(t,\"c\",(function(){return j}));var n=r(\"o0o1\"),a=r.n(n);function o(e,t){if(null==e)return{};var r,n,a=function(e,t){if(null==e)return{};var r,n,a={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(a[r]=e[r]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}var c=r(\"HaE+\");var u=r(\"BsWD\");function i(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if(\"undefined\"!==typeof Symbol&&Symbol.iterator in Object(e)){var r=[],n=!0,a=!1,o=void 0;try{for(var c,u=e[Symbol.iterator]();!(n=(c=u.next()).done)&&(r.push(c.value),!t||r.length!==t);n=!0);}catch(i){a=!0,o=i}finally{try{n||null==u.return||u.return()}finally{if(a)throw o}}return r}}(e,t)||Object(u.a)(e,t)||function(){throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\")}()}var s=r(\"rePB\"),f=r(\"q1tI\"),l=r.n(f),p=r(\"094J\"),d=l.a.createElement;function v(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function y(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?v(Object(r),!0).forEach((function(t){Object(s.a)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):v(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var h=Object(f.createContext)(),m=Object(f.createContext)(),b=Object(p.a)(\"jamstackforum-auth\"),O={isAuthenticated:!1,user:null,token:null,save_last_seen:!1};function g(e,t){var r=t.payload,n=t.type;switch(n){case\"LOGIN_SUCCESS\":return y(y(y({},e),r),{},{isAuthenticated:!0});case\"UPDATE_USER\":return y(y({},e),{},{user:y(y({},e.user),r)});case\"LOGOUT\":return O;default:throw new Error(\"Unhandled action type \".concat(n))}}function w(e){var t=e.children,r=i(b(O),2),n=r[0],u=r[1],s=Object(f.useReducer)(g,n),l=s[0],p=s[1];Object(f.useEffect)((function(){u(l)}),[l,u]);var v=function(){var e=Object(c.a)(a.a.mark((function e(t){var r,n,c,u,i,s,f;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.email,n=t.password,c=t.save_last_seen,e.next=3,fetch(\"/api/login\",{method:\"POST\",body:JSON.stringify({email:r,password:n}),headers:{\"Content-Type\":\"application/json\"}});case 3:return u=e.sent,e.next=6,u.json();case 6:if(i=e.sent,u.ok){e.next=9;break}throw new Error(null===i||void 0===i?void 0:i.message);case 9:s=i.token,f=o(i,[\"token\"]),p({type:\"LOGIN_SUCCESS\",payload:{token:s,user:f,save_last_seen:c}});case 11:case\"end\":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),y=function(){var e=Object(c.a)(a.a.mark((function e(t){var r,n,c,u,i,s,f,l;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.name,n=t.email,c=t.password,u=t.save_last_seen,e.next=3,fetch(\"/api/register\",{method:\"POST\",body:JSON.stringify({name:r,email:n,password:c}),headers:{\"Content-Type\":\"application/json\"}});case 3:return i=e.sent,e.next=6,i.json();case 6:if(s=e.sent,i.ok){e.next=9;break}throw new Error(null===s||void 0===s?void 0:s.message);case 9:f=s.token,l=o(s,[\"token\"]),p({type:\"LOGIN_SUCCESS\",payload:{token:f,user:l,save_last_seen:u}});case 11:case\"end\":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return d(h.Provider,{value:{login:v,register:y,updateUser:function(e){return p({type:\"UPDATE_USER\",payload:e})},logout:function(){return p({type:\"LOGOUT\"})}}},d(m.Provider,{value:l},t))}function x(){var e=Object(f.useContext)(h);if(void 0===e)throw new Error(\"useAuthDispatch must be used within an AuthProvider\");return e}function j(){var e=Object(f.useContext)(m);if(void 0===e)throw new Error(\"useAuthState must be used within an AuthProvider\");return e}},BsWD:function(e,t,r){\"use strict\";r.d(t,\"a\",(function(){return a}));var n=r(\"a3WO\");function a(e,t){if(e){if(\"string\"===typeof e)return Object(n.a)(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return\"Object\"===r&&e.constructor&&(r=e.constructor.name),\"Map\"===r||\"Set\"===r?Array.from(e):\"Arguments\"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Object(n.a)(e,t):void 0}}},\"HaE+\":function(e,t,r){\"use strict\";function n(e,t,r,n,a,o,c){try{var u=e[o](c),i=u.value}catch(s){return void r(s)}u.done?t(i):Promise.resolve(i).then(n,a)}function a(e){return function(){var t=this,r=arguments;return new Promise((function(a,o){var c=e.apply(t,r);function u(e){n(c,a,o,u,i,\"next\",e)}function i(e){n(c,a,o,u,i,\"throw\",e)}u(void 0)}))}}r.d(t,\"a\",(function(){return a}))},YFqc:function(e,t,r){e.exports=r(\"cTJO\")},a3WO:function(e,t,r){\"use strict\";function n(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}r.d(t,\"a\",(function(){return n}))},cTJO:function(e,t,r){\"use strict\";var n=r(\"zoAU\"),a=r(\"7KCV\");t.__esModule=!0,t.default=void 0;var o,c=a(r(\"q1tI\")),u=r(\"elyg\"),i=r(\"nOHt\"),s=new Map,f=window.IntersectionObserver,l={};var p=function(e,t){var r=o||(f?o=new f((function(e){e.forEach((function(e){if(s.has(e.target)){var t=s.get(e.target);(e.isIntersecting||e.intersectionRatio>0)&&(o.unobserve(e.target),s.delete(e.target),t())}}))}),{rootMargin:\"200px\"}):void 0);return r?(r.observe(e),s.set(e,t),function(){try{r.unobserve(e)}catch(t){console.error(t)}s.delete(e)}):function(){}};function d(e,t,r,n){(0,u.isLocalURL)(t)&&(e.prefetch(t,r,n).catch((function(e){0})),l[t+\"%\"+r]=!0)}var v=function(e){var t=!1!==e.prefetch,r=c.default.useState(),a=n(r,2),o=a[0],s=a[1],v=(0,i.useRouter)(),y=v&&v.pathname||\"/\",h=c.default.useMemo((function(){var t=(0,u.resolveHref)(y,e.href,!0),r=n(t,2),a=r[0],o=r[1];return{href:a,as:e.as?(0,u.resolveHref)(y,e.as):o||a}}),[y,e.href,e.as]),m=h.href,b=h.as;c.default.useEffect((function(){if(t&&f&&o&&o.tagName&&(0,u.isLocalURL)(m)&&!l[m+\"%\"+b])return p(o,(function(){d(v,m,b)}))}),[t,o,m,b,v]);var O=e.children,g=e.replace,w=e.shallow,x=e.scroll;\"string\"===typeof O&&(O=c.default.createElement(\"a\",null,O));var j=c.Children.only(O),E={ref:function(e){e&&s(e),j&&\"object\"===typeof j&&j.ref&&(\"function\"===typeof j.ref?j.ref(e):\"object\"===typeof j.ref&&(j.ref.current=e))},onClick:function(e){j.props&&\"function\"===typeof j.props.onClick&&j.props.onClick(e),e.defaultPrevented||function(e,t,r,n,a,o,c){(\"A\"!==e.currentTarget.nodeName||!function(e){var t=e.currentTarget.target;return t&&\"_self\"!==t||e.metaKey||e.ctrlKey||e.shiftKey||e.altKey||e.nativeEvent&&2===e.nativeEvent.which}(e)&&(0,u.isLocalURL)(r))&&(e.preventDefault(),null==c&&(c=n.indexOf(\"#\")<0),t[a?\"replace\":\"push\"](r,n,{shallow:o}).then((function(e){e&&c&&(window.scrollTo(0,0),document.body.focus())})))}(e,v,m,b,g,w,x)}};return t&&(E.onMouseEnter=function(e){(0,u.isLocalURL)(m)&&(j.props&&\"function\"===typeof j.props.onMouseEnter&&j.props.onMouseEnter(e),d(v,m,b,{priority:!0}))}),(e.passHref||\"a\"===j.type&&!(\"href\"in j.props))&&(E.href=(0,u.addBasePath)((0,u.addLocale)(b,v&&v.locale,v&&v.defaultLocale))),c.default.cloneElement(j,E)};t.default=v},dhTN:function(e,t,r){\"use strict\";r.r(t),r.d(t,\"default\",(function(){return s}));var n=r(\"q1tI\"),a=r.n(n),o=r(\"YFqc\"),c=r.n(o),u=r(\"4e9g\"),i=a.a.createElement;function s(e){var t=e.children,r=Object(u.c)(),n=r.isAuthenticated,o=r.user,s=Object(u.b)().logout;return i(a.a.Fragment,null,i(\"header\",{className:\"py-6 md:py-8\"},i(\"div\",{className:\"max-w-4xl mx-auto px-6\"},i(\"div\",{className:\"flex items-center justify-between py-3\"},i(\"div\",{className:\"flex space-x-1\"},i(c.a,{href:\"/\"},i(\"a\",{className:\"text-gray-600 hover:text-primary-500\"},\"Recent\")),i(c.a,{href:\"/categories\"},i(\"a\",{className:\"text-gray-600 hover:text-primary-500\"},\"Categories\")),n?i(\"span\",{className:\"flex space-x-1\"},i(c.a,{href:\"/edit-profile\"},i(\"a\",{className:\"text-gray-600 hover:text-primary-500\"},o.name)),i(\"button\",{onClick:s,className:\"appearance-none text-gray-600 hover:text-primary-500\"},\"Logout\"),i(c.a,{href:\"/new\"},i(\"a\",{className:\"text-gray-600 hover:text-primary-500\"},\"New thread\"))):i(a.a.Fragment,null,i(c.a,{href:\"/login\"},i(\"a\",{className:\"text-gray-600 hover:text-primary-500\"},\"Login\")),i(c.a,{href:\"/register\"},i(\"a\",{className:\"text-gray-600 hover:text-primary-500\"},\"Register\")))),i(\"div\",{className:\"hidden md:flex items-center space-x-3\"},i(c.a,{href:\"/members\"},i(\"a\",{className:\"text-gray-600 hover:text-primary-500\"},\"Members\")),i(c.a,{href:\"/today\"},i(\"a\",{className:\"text-gray-600 hover:text-primary-500\"},\"Today's Posts\")),i(c.a,{href:\"/answered\"},i(\"a\",{className:\"text-gray-600 hover:text-primary-500\"},\"Answered\")),i(c.a,{href:\"/unanswered\"},i(\"a\",{className:\"text-gray-600 hover:text-primary-500\"},\"Uanswered\")))))),i(\"div\",{className:\"max-w-4xl mx-auto p-6\"},t),i(\"footer\",{className:\"max-w-4xl mx-auto p-6\"},i(\"div\",{className:\"border-t pt-6 text-center text-sm text-gray-600\"},\"\\xa9 JamstackBB \\u2014 0.1.0 \\u2014 Built by\",\" \",i(\"a\",{href:\"https://notrab.dev\",target:\"_blank\"},\"@notrab\"))))}},o0o1:function(e,t,r){e.exports=r(\"ls82\")},puqk:function(e,t,r){\"use strict\";(function(e){var n=r(\"q1tI\");t.a=function(t,r,a,o){void 0===a&&(a=e),void 0===o&&(o={});var c=Object(n.useRef)(),u=o.capture,i=o.passive,s=o.once;Object(n.useEffect)((function(){c.current=r}),[r]),Object(n.useEffect)((function(){if(a&&a.addEventListener){var e=function(e){return c.current(e)},r={capture:u,passive:i,once:s};return a.addEventListener(t,e,r),function(){a.removeEventListener(t,e,r)}}}),[t,a,u,i,s])}}).call(this,r(\"yLpj\"))},rePB:function(e,t,r){\"use strict\";function n(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}r.d(t,\"a\",(function(){return n}))},vxVp:function(e,t,r){(window.__NEXT_P=window.__NEXT_P||[]).push([\"/Components/Layout2\",function(){return r(\"dhTN\")}])},yLpj:function(e,t){var r;r=function(){return this}();try{r=r||new Function(\"return this\")()}catch(n){\"object\"===typeof window&&(r=window)}e.exports=r}},[[\"vxVp\",0,1,2,3]]]);","extractedComments":[]}