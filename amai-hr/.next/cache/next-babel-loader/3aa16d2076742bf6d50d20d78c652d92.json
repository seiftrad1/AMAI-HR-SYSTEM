{"ast":null,"code":"import _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _taggedTemplateLiteral from \"@babel/runtime/helpers/esm/taggedTemplateLiteral\";\n\nvar _templateObject,\n    _templateObject2,\n    _jsxFileName = \"C:\\\\Users\\\\msdtt\\\\OneDrive\\\\Documents\\\\amai_hr_next_js_hasura\\\\amai-hr\\\\pages\\\\Components\\\\Header\\\\Header.js\",\n    _s = $RefreshSig$();\n\nvar __jsx = React.createElement;\nimport React from \"react\";\nimport Link from \"next/link\";\nimport { useAuthState, useAuthDispatch } from \"../../../context/auth\";\nimport gql from \"graphql-tag\";\nimport { hasuraUserClient } from \"../../../lib/hasura-user-client\";\nvar updateN = gql(_templateObject || (_templateObject = _taggedTemplateLiteral([\"\\n  mutation MyMutation($_eq: Int!) {\\n    update_notification(\\n      where: { user_id: { _eq: $_eq } }\\n      _set: { seen: true }\\n    ) {\\n      affected_rows\\n    }\\n  }\\n\"])));\nvar GetUserById = gql(_templateObject2 || (_templateObject2 = _taggedTemplateLiteral([\"\\n  query GetUserById($user_id: Int!) {\\n    User_by_pk(id: $user_id) {\\n      id\\n      notifications_aggregate(where: { seen: { _eq: false } }) {\\n        aggregate {\\n          count\\n        }\\n      }\\n      notifications(where: { seen: { _eq: false } }) {\\n        id\\n        description\\n        created_at\\n      }\\n    }\\n  }\\n\"])));\nexport default function Header() {\n  _s();\n\n  var _this = this;\n\n  var _useAuthDispatch = useAuthDispatch(),\n      logout = _useAuthDispatch.logout;\n\n  var _useAuthDispatch2 = useAuthDispatch(),\n      updateUser = _useAuthDispatch2.updateUser;\n\n  var hasura = hasuraUserClient();\n\n  var _useAuthState = useAuthState(),\n      isAuthenticated = _useAuthState.isAuthenticated,\n      user = _useAuthState.user;\n\n  var UpdateUser = /*#__PURE__*/function () {\n    var _ref = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee() {\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              updateUser(user.notifications);\n              console.log(user.notifications);\n\n            case 2:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee);\n    }));\n\n    return function UpdateUser() {\n      return _ref.apply(this, arguments);\n    };\n  }();\n\n  var Complete = /*#__PURE__*/function () {\n    var _ref2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee2() {\n      var _yield$hasura$request, update_notification, _yield$hasura$request2, User_by_pk;\n\n      return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n        while (1) {\n          switch (_context2.prev = _context2.next) {\n            case 0:\n              _context2.prev = 0;\n\n              if (!isAuthenticated) {\n                _context2.next = 11;\n                break;\n              }\n\n              _context2.next = 4;\n              return hasura.request(updateN, {\n                _eq: user.id\n              });\n\n            case 4:\n              _yield$hasura$request = _context2.sent;\n              update_notification = _yield$hasura$request.update_notification;\n              _context2.next = 8;\n              return hasura.request(GetUserById, {\n                user_id: user.id\n              });\n\n            case 8:\n              _yield$hasura$request2 = _context2.sent;\n              User_by_pk = _yield$hasura$request2.User_by_pk;\n              updateUser(User_by_pk);\n\n            case 11:\n              window.location.reload;\n              _context2.next = 17;\n              break;\n\n            case 14:\n              _context2.prev = 14;\n              _context2.t0 = _context2[\"catch\"](0);\n              console.log(_context2.t0);\n\n            case 17:\n            case \"end\":\n              return _context2.stop();\n          }\n        }\n      }, _callee2, null, [[0, 14]]);\n    }));\n\n    return function Complete() {\n      return _ref2.apply(this, arguments);\n    };\n  }();\n\n  var submit = function submit(id) {\n    var pathname = \"/Task/\".concat(id);\n    location.replace(pathname);\n  };\n\n  var sub = function sub(id) {\n    var pathname = \"/UpdateTodo/\".concat(id);\n    location.replace(pathname);\n  };\n\n  var suboff = function suboff(id) {\n    var pathname = \"/offboarding/\".concat(id);\n    location.replace(pathname);\n  };\n\n  return __jsx(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 71,\n      columnNumber: 5\n    }\n  }, isAuthenticated ? __jsx(\"div\", {\n    className: \"page-header navbar navbar-fixed-top \",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 73,\n      columnNumber: 9\n    }\n  }, __jsx(\"div\", {\n    className: \"page-header navbar navbar-fixed-top \",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 74,\n      columnNumber: 11\n    }\n  }, __jsx(\"div\", {\n    className: \"page-header-inner \",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 75,\n      columnNumber: 13\n    }\n  }, __jsx(\"div\", {\n    className: \"page-logo\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 76,\n      columnNumber: 15\n    }\n  }, __jsx(Link, {\n    href: \"/\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 77,\n      columnNumber: 17\n    }\n  }, __jsx(\"a\", {\n    href: \"#\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 78,\n      columnNumber: 19\n    }\n  }, __jsx(\"div\", {\n    style: {\n      marginTop: -35\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 79,\n      columnNumber: 21\n    }\n  }, __jsx(\"img\", {\n    src: \"../svg/AMAI-AI-Experts.inline.svg\",\n    alt: \"logo\",\n    className: \"logo-default\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 80,\n      columnNumber: 23\n    }\n  }), \" \"))), __jsx(\"div\", {\n    className: \"menu-toggler sidebar-toggler \",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 88,\n      columnNumber: 17\n    }\n  }, __jsx(\"span\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 89,\n      columnNumber: 19\n    }\n  }))), __jsx(\"a\", {\n    href: \"#\",\n    className: \"menu-toggler responsive-toggler\",\n    \"data-toggle\": \"collapse\",\n    \"data-target\": \".navbar-collapse\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 92,\n      columnNumber: 15\n    }\n  }, __jsx(\"span\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 98,\n      columnNumber: 17\n    }\n  })), \" \", __jsx(\"div\", {\n    className: \"page-top\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 100,\n      columnNumber: 15\n    }\n  }, __jsx(\"div\", {\n    className: \"top-menu\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 101,\n      columnNumber: 17\n    }\n  }, __jsx(\"ul\", {\n    className: \"nav navbar-nav pull-right\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 102,\n      columnNumber: 19\n    }\n  }, __jsx(\"li\", {\n    className: \"separator hide\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 103,\n      columnNumber: 21\n    }\n  }, \" \"), __jsx(\"li\", {\n    className: \"dropdown dropdown-user dropdown-dark\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 105,\n      columnNumber: 21\n    }\n  }, __jsx(\"a\", {\n    href: \"#\",\n    className: \"dropdown-toggle\",\n    \"data-toggle\": \"dropdown\",\n    \"data-hover\": \"dropdown\",\n    \"data-close-others\": \"true\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 106,\n      columnNumber: 23\n    }\n  }, __jsx(\"i\", {\n    className: \"icon-bell\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 113,\n      columnNumber: 25\n    }\n  }), __jsx(\"span\", {\n    className: \"badge badge-danger\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 114,\n      columnNumber: 25\n    }\n  }, user.notifications_aggregate.aggregate.count)), __jsx(\"ul\", {\n    className: \"dropdown-menu dropdown-menu-default\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 119,\n      columnNumber: 23\n    }\n  }, \" \", __jsx(\"li\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 121,\n      columnNumber: 25\n    }\n  }, __jsx(\"span\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 122,\n      columnNumber: 27\n    }\n  }, \" \", __jsx(\"a\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 124,\n      columnNumber: 29\n    }\n  }, user.notifications_aggregate.aggregate.count, \" \", \"pending notifications\", \" \"), \" \", __jsx(\"a\", {\n    onClick: Complete,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 128,\n      columnNumber: 29\n    }\n  }, \"view all\")), \" \"), user.notifications.map(function (_ref3) {\n    var id = _ref3.id,\n        description = _ref3.description,\n        created_at = _ref3.created_at;\n    return __jsx(\"li\", {\n      key: id,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 134,\n        columnNumber: 31\n      }\n    }, \" \", __jsx(\"i\", {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 136,\n        columnNumber: 33\n      }\n    }), __jsx(\"span\", {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 137,\n        columnNumber: 33\n      }\n    }, \" \", __jsx(\"a\", {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 139,\n        columnNumber: 35\n      }\n    }, description)));\n  }))), __jsx(\"li\", {\n    className: \"dropdown dropdown-user dropdown-dark\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 147,\n      columnNumber: 21\n    }\n  }, __jsx(\"a\", {\n    href: \"#\",\n    className: \"dropdown-toggle\",\n    \"data-toggle\": \"dropdown\",\n    \"data-hover\": \"dropdown\",\n    \"data-close-others\": \"true\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 148,\n      columnNumber: 23\n    }\n  }, user.Avatar ? __jsx(\"img\", {\n    style: {\n      marginRight: 6,\n      objectFit: \"cover\",\n      width: 38,\n      height: 38\n    },\n    className: \"image_inner_containerHeader\",\n    src: \"../\".concat(user.Avatar),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 156,\n      columnNumber: 27\n    }\n  }) : __jsx(\"img\", {\n    style: {\n      marginRight: 6,\n      objectFit: \"cover\",\n      width: 38,\n      height: 38\n    },\n    src: \"../profile.png\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 167,\n      columnNumber: 27\n    }\n  }), \" \", __jsx(\"span\", {\n    className: \"username username-hide-on-mobile\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 177,\n      columnNumber: 25\n    }\n  }, \" \", user.Name, \" \"), __jsx(\"i\", {\n    className: \"fa fa-angle-down\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 181,\n      columnNumber: 25\n    }\n  })), __jsx(\"ul\", {\n    className: \"dropdown-menu dropdown-menu-default\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 183,\n      columnNumber: 23\n    }\n  }, __jsx(\"li\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 184,\n      columnNumber: 25\n    }\n  }, __jsx(Link, {\n    href: \"../Profile/\".concat(user.id),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 185,\n      columnNumber: 27\n    }\n  }, __jsx(\"a\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 186,\n      columnNumber: 29\n    }\n  }, __jsx(\"i\", {\n    className: \"icon-user\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 187,\n      columnNumber: 31\n    }\n  }), \" My Profile\", \" \")), \" \"), __jsx(\"li\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 191,\n      columnNumber: 25\n    }\n  }, __jsx(\"a\", {\n    onClick: function onClick() {\n      return submit(user.id);\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 192,\n      columnNumber: 27\n    }\n  }, __jsx(\"i\", {\n    className: \"icon-rocket\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 193,\n      columnNumber: 29\n    }\n  }), \" My Tasks\", \" \")), \" \", __jsx(\"li\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 196,\n      columnNumber: 25\n    }\n  }), __jsx(\"li\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 197,\n      columnNumber: 25\n    }\n  }, __jsx(Link, {\n    href: \"/Calendar\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 198,\n      columnNumber: 27\n    }\n  }, __jsx(\"a\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 199,\n      columnNumber: 29\n    }\n  }, __jsx(\"i\", {\n    className: \"icon-calendar\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 200,\n      columnNumber: 31\n    }\n  }), \"My Calendar\", \" \"))), \" \", __jsx(\"li\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 204,\n      columnNumber: 25\n    }\n  }, __jsx(Link, {\n    href: \"../leave/\".concat(user.id),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 205,\n      columnNumber: 27\n    }\n  }, __jsx(\"a\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 206,\n      columnNumber: 29\n    }\n  }, __jsx(\"i\", {\n    className: \"fa fa-plane\",\n    \"aria-hidden\": \"true\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 207,\n      columnNumber: 31\n    }\n  }), \"My Holidays\", \" \"))), __jsx(\"li\", {\n    className: \"divider\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 212,\n      columnNumber: 25\n    }\n  }, \" \"), \" \", __jsx(\"li\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 213,\n      columnNumber: 25\n    }\n  }, __jsx(\"a\", {\n    onClick: function onClick() {\n      return sub(user.id);\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 214,\n      columnNumber: 27\n    }\n  }, __jsx(\"i\", {\n    className: \"icon-lock\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 215,\n      columnNumber: 29\n    }\n  }), \"Onboarding\", \" \")), \" \", __jsx(\"li\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 218,\n      columnNumber: 25\n    }\n  }, __jsx(\"a\", {\n    onClick: function onClick() {\n      return suboff(user.id);\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 219,\n      columnNumber: 27\n    }\n  }, __jsx(\"i\", {\n    className: \"icon-lock\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 220,\n      columnNumber: 29\n    }\n  }), \"Offboarding\", \" \")), \" \", __jsx(Link, {\n    href: \"/login\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 223,\n      columnNumber: 25\n    }\n  }, __jsx(\"li\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 224,\n      columnNumber: 27\n    }\n  }, __jsx(\"a\", {\n    href: \"page_user_login_1.html\",\n    onClick: logout,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 225,\n      columnNumber: 29\n    }\n  }, __jsx(\"i\", {\n    className: \"icon-key\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 226,\n      columnNumber: 31\n    }\n  }), \" Log Out\", \" \"))))), __jsx(\"li\", {\n    className: \"dropdown dropdown-quick-sidebar-toggler\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 232,\n      columnNumber: 21\n    }\n  }, __jsx(\"a\", {\n    href: \"#\",\n    className: \"dropdown-toggle\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 233,\n      columnNumber: 23\n    }\n  }, __jsx(\"i\", {\n    className: \"icon-logout\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 234,\n      columnNumber: 25\n    }\n  }))))))))) : __jsx(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 244,\n      columnNumber: 9\n    }\n  }));\n}\n\n_s(Header, \"S/uQgCGWeN0skywZo7SgWpoZlc0=\", false, function () {\n  return [useAuthDispatch, useAuthDispatch, useAuthState];\n});\n\n_c = Header;\n\nvar _c;\n\n$RefreshReg$(_c, \"Header\");","map":{"version":3,"sources":["C:/Users/msdtt/OneDrive/Documents/amai_hr_next_js_hasura/amai-hr/pages/Components/Header/Header.js"],"names":["React","Link","useAuthState","useAuthDispatch","gql","hasuraUserClient","updateN","GetUserById","Header","logout","updateUser","hasura","isAuthenticated","user","UpdateUser","notifications","console","log","Complete","request","_eq","id","update_notification","user_id","User_by_pk","window","location","reload","submit","pathname","replace","sub","suboff","marginTop","notifications_aggregate","aggregate","count","map","description","created_at","Avatar","marginRight","objectFit","width","height","Name"],"mappings":"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","sourcesContent":["import React from \"react\";\r\nimport Link from \"next/link\";\r\nimport { useAuthState, useAuthDispatch } from \"../../../context/auth\";\r\nimport gql from \"graphql-tag\";\r\nimport { hasuraUserClient } from \"../../../lib/hasura-user-client\";\r\nconst updateN = gql`\r\n  mutation MyMutation($_eq: Int!) {\r\n    update_notification(\r\n      where: { user_id: { _eq: $_eq } }\r\n      _set: { seen: true }\r\n    ) {\r\n      affected_rows\r\n    }\r\n  }\r\n`;\r\nconst GetUserById = gql`\r\n  query GetUserById($user_id: Int!) {\r\n    User_by_pk(id: $user_id) {\r\n      id\r\n      notifications_aggregate(where: { seen: { _eq: false } }) {\r\n        aggregate {\r\n          count\r\n        }\r\n      }\r\n      notifications(where: { seen: { _eq: false } }) {\r\n        id\r\n        description\r\n        created_at\r\n      }\r\n    }\r\n  }\r\n`;\r\nexport default function Header() {\r\n  const { logout } = useAuthDispatch();\r\n  const { updateUser } = useAuthDispatch();\r\n  const hasura = hasuraUserClient();\r\n  const { isAuthenticated, user } = useAuthState();\r\n  const UpdateUser = async () => {\r\n    updateUser(user.notifications);\r\n    console.log(user.notifications);\r\n  };\r\n  const Complete = async () => {\r\n    try {\r\n      if (isAuthenticated) {\r\n        const { update_notification } = await hasura.request(updateN, {\r\n          _eq: user.id,\r\n        });\r\n        const { User_by_pk } = await hasura.request(GetUserById, {\r\n          user_id: user.id,\r\n        });\r\n        updateUser(User_by_pk);\r\n      }\r\n      window.location.reload;\r\n    } catch (err) {\r\n      console.log(err);\r\n    }\r\n  };\r\n  const submit = (id) => {\r\n    const pathname = `/Task/${id}`;\r\n    location.replace(pathname);\r\n  };\r\n  const sub = (id) => {\r\n    const pathname = `/UpdateTodo/${id}`;\r\n    location.replace(pathname);\r\n  };\r\n  const suboff = (id) => {\r\n    const pathname = `/offboarding/${id}`;\r\n    location.replace(pathname);\r\n  };\r\n  return (\r\n    <div>\r\n      {isAuthenticated ? (\r\n        <div className=\"page-header navbar navbar-fixed-top \">\r\n          <div className=\"page-header navbar navbar-fixed-top \">\r\n            <div className=\"page-header-inner \">\r\n              <div className=\"page-logo\">\r\n                <Link href=\"/\">\r\n                  <a href=\"#\">\r\n                    <div style={{ marginTop: -35 }}>\r\n                      <img\r\n                        src=\"../svg/AMAI-AI-Experts.inline.svg\"\r\n                        alt=\"logo\"\r\n                        className=\"logo-default\"\r\n                      />{\" \"}\r\n                    </div>\r\n                  </a>\r\n                </Link>\r\n                <div className=\"menu-toggler sidebar-toggler \">\r\n                  <span></span>\r\n                </div>\r\n              </div>\r\n              <a\r\n                href=\"#\"\r\n                className=\"menu-toggler responsive-toggler\"\r\n                data-toggle=\"collapse\"\r\n                data-target=\".navbar-collapse\"\r\n              >\r\n                <span></span>\r\n              </a>{\" \"}\r\n              <div className=\"page-top\">\r\n                <div className=\"top-menu\">\r\n                  <ul className=\"nav navbar-nav pull-right\">\r\n                    <li className=\"separator hide\"> </li>\r\n\r\n                    <li className=\"dropdown dropdown-user dropdown-dark\">\r\n                      <a\r\n                        href=\"#\"\r\n                        className=\"dropdown-toggle\"\r\n                        data-toggle=\"dropdown\"\r\n                        data-hover=\"dropdown\"\r\n                        data-close-others=\"true\"\r\n                      >\r\n                        <i className=\"icon-bell\"></i>\r\n                        <span className=\"badge badge-danger\">\r\n                          {user.notifications_aggregate.aggregate.count}\r\n                        </span>\r\n                      </a>\r\n\r\n                      <ul className=\"dropdown-menu dropdown-menu-default\">\r\n                        {\" \"}\r\n                        <li>\r\n                          <span>\r\n                            {\" \"}\r\n                            <a>\r\n                              {user.notifications_aggregate.aggregate.count}{\" \"}\r\n                              pending notifications{\" \"}\r\n                            </a>{\" \"}\r\n                            <a onClick={Complete}>view all</a>\r\n                          </span>{\" \"}\r\n                        </li>\r\n                        {user.notifications.map(\r\n                          ({ id, description, created_at }) => {\r\n                            return (\r\n                              <li key={id}>\r\n                                {\" \"}\r\n                                <i></i>\r\n                                <span>\r\n                                  {\" \"}\r\n                                  <a>{description}</a>\r\n                                </span>\r\n                              </li>\r\n                            );\r\n                          }\r\n                        )}\r\n                      </ul>\r\n                    </li>\r\n                    <li className=\"dropdown dropdown-user dropdown-dark\">\r\n                      <a\r\n                        href=\"#\"\r\n                        className=\"dropdown-toggle\"\r\n                        data-toggle=\"dropdown\"\r\n                        data-hover=\"dropdown\"\r\n                        data-close-others=\"true\"\r\n                      >\r\n                        {user.Avatar ? (\r\n                          <img\r\n                            style={{\r\n                              marginRight: 6,\r\n                              objectFit: \"cover\",\r\n                              width: 38,\r\n                              height: 38,\r\n                            }}\r\n                            className=\"image_inner_containerHeader\"\r\n                            src={`../${user.Avatar}`}\r\n                          />\r\n                        ) : (\r\n                          <img\r\n                            style={{\r\n                              marginRight: 6,\r\n                              objectFit: \"cover\",\r\n                              width: 38,\r\n                              height: 38,\r\n                            }}\r\n                            src={`../profile.png`}\r\n                          />\r\n                        )}{\" \"}\r\n                        <span className=\"username username-hide-on-mobile\">\r\n                          {\" \"}\r\n                          {user.Name}{\" \"}\r\n                        </span>\r\n                        <i className=\"fa fa-angle-down\"></i>\r\n                      </a>\r\n                      <ul className=\"dropdown-menu dropdown-menu-default\">\r\n                        <li>\r\n                          <Link href={`../Profile/${user.id}`}>\r\n                            <a>\r\n                              <i className=\"icon-user\"></i> My Profile{\" \"}\r\n                            </a>\r\n                          </Link>{\" \"}\r\n                        </li>\r\n                        <li>\r\n                          <a onClick={() => submit(user.id)}>\r\n                            <i className=\"icon-rocket\"></i> My Tasks{\" \"}\r\n                          </a>\r\n                        </li>{\" \"}\r\n                        <li></li>\r\n                        <li>\r\n                          <Link href=\"/Calendar\">\r\n                            <a>\r\n                              <i className=\"icon-calendar\"></i>My Calendar{\" \"}\r\n                            </a>\r\n                          </Link>\r\n                        </li>{\" \"}\r\n                        <li>\r\n                          <Link href={`../leave/${user.id}`}>\r\n                            <a>\r\n                              <i className=\"fa fa-plane\" aria-hidden=\"true\"></i>\r\n                              My Holidays{\" \"}\r\n                            </a>\r\n                          </Link>\r\n                        </li>\r\n                        <li className=\"divider\"> </li>{\" \"}\r\n                        <li>\r\n                          <a onClick={() => sub(user.id)}>\r\n                            <i className=\"icon-lock\"></i>Onboarding{\" \"}\r\n                          </a>\r\n                        </li>{\" \"}\r\n                        <li>\r\n                          <a onClick={() => suboff(user.id)}>\r\n                            <i className=\"icon-lock\"></i>Offboarding{\" \"}\r\n                          </a>\r\n                        </li>{\" \"}\r\n                        <Link href=\"/login\">\r\n                          <li>\r\n                            <a href=\"page_user_login_1.html\" onClick={logout}>\r\n                              <i className=\"icon-key\"></i> Log Out{\" \"}\r\n                            </a>\r\n                          </li>\r\n                        </Link>\r\n                      </ul>\r\n                    </li>\r\n                    <li className=\"dropdown dropdown-quick-sidebar-toggler\">\r\n                      <a href=\"#\" className=\"dropdown-toggle\">\r\n                        <i className=\"icon-logout\"></i>\r\n                      </a>\r\n                    </li>\r\n                  </ul>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      ) : (\r\n        <div></div>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n"]},"metadata":{},"sourceType":"module"}