{"ast":null,"code":"import formidable from \"formidable\";\nimport fs from \"fs\";\nexport const config = {\n  api: {\n    bodyParser: false\n  }\n};\n\nconst post = async (req, res) => {\n  const form = new formidable.IncomingForm();\n  form.parse(req, async function (err, fields, files) {\n    await saveFile(files.file);\n    return res.status(201).send(\"\");\n  });\n};\n\nconst saveFile = async file => {\n  const data = fs.readFileSync(file.path);\n  fs.writeFileSync(`./public/${file.name}`, data);\n  await fs.unlinkSync(file.path);\n  return;\n};\n\nexport default ((req, res) => {\n  req.method === \"POST\" ? post(req, res) : req.method === \"PUT\" ? console.log(\"PUT\") : req.method === \"DELETE\" ? console.log(\"DELETE\") : req.method === \"GET\" ? console.log(\"GET\") : res.status(404).send(\"\");\n});","map":{"version":3,"sources":["C:/Users/msdtt/OneDrive/Documents/amai_hr_next_js_hasura/amai-hr/pages/api/file.js"],"names":["formidable","fs","config","api","bodyParser","post","req","res","form","IncomingForm","parse","err","fields","files","saveFile","file","status","send","data","readFileSync","path","writeFileSync","name","unlinkSync","method","console","log"],"mappings":"AAAA,OAAOA,UAAP,MAAuB,YAAvB;AACA,OAAOC,EAAP,MAAe,IAAf;AAEA,OAAO,MAAMC,MAAM,GAAG;AACpBC,EAAAA,GAAG,EAAE;AACHC,IAAAA,UAAU,EAAE;AADT;AADe,CAAf;;AAMP,MAAMC,IAAI,GAAG,OAAOC,GAAP,EAAYC,GAAZ,KAAoB;AAC/B,QAAMC,IAAI,GAAG,IAAIR,UAAU,CAACS,YAAf,EAAb;AACAD,EAAAA,IAAI,CAACE,KAAL,CAAWJ,GAAX,EAAgB,gBAAgBK,GAAhB,EAAqBC,MAArB,EAA6BC,KAA7B,EAAoC;AAClD,UAAMC,QAAQ,CAACD,KAAK,CAACE,IAAP,CAAd;AACA,WAAOR,GAAG,CAACS,MAAJ,CAAW,GAAX,EAAgBC,IAAhB,CAAqB,EAArB,CAAP;AACD,GAHD;AAID,CAND;;AAQA,MAAMH,QAAQ,GAAG,MAAOC,IAAP,IAAgB;AAC/B,QAAMG,IAAI,GAAGjB,EAAE,CAACkB,YAAH,CAAgBJ,IAAI,CAACK,IAArB,CAAb;AACAnB,EAAAA,EAAE,CAACoB,aAAH,CAAkB,YAAWN,IAAI,CAACO,IAAK,EAAvC,EAA0CJ,IAA1C;AACA,QAAMjB,EAAE,CAACsB,UAAH,CAAcR,IAAI,CAACK,IAAnB,CAAN;AACA;AACD,CALD;;AAOA,gBAAe,CAACd,GAAD,EAAMC,GAAN,KAAc;AAC3BD,EAAAA,GAAG,CAACkB,MAAJ,KAAe,MAAf,GACInB,IAAI,CAACC,GAAD,EAAMC,GAAN,CADR,GAEID,GAAG,CAACkB,MAAJ,KAAe,KAAf,GACAC,OAAO,CAACC,GAAR,CAAY,KAAZ,CADA,GAEApB,GAAG,CAACkB,MAAJ,KAAe,QAAf,GACAC,OAAO,CAACC,GAAR,CAAY,QAAZ,CADA,GAEApB,GAAG,CAACkB,MAAJ,KAAe,KAAf,GACAC,OAAO,CAACC,GAAR,CAAY,KAAZ,CADA,GAEAnB,GAAG,CAACS,MAAJ,CAAW,GAAX,EAAgBC,IAAhB,CAAqB,EAArB,CARJ;AASD,CAVD","sourcesContent":["import formidable from \"formidable\";\r\nimport fs from \"fs\";\r\n\r\nexport const config = {\r\n  api: {\r\n    bodyParser: false,\r\n  },\r\n};\r\n\r\nconst post = async (req, res) => {\r\n  const form = new formidable.IncomingForm();\r\n  form.parse(req, async function (err, fields, files) {\r\n    await saveFile(files.file);\r\n    return res.status(201).send(\"\");\r\n  });\r\n};\r\n\r\nconst saveFile = async (file) => {\r\n  const data = fs.readFileSync(file.path);\r\n  fs.writeFileSync(`./public/${file.name}`, data);\r\n  await fs.unlinkSync(file.path);\r\n  return;\r\n};\r\n\r\nexport default (req, res) => {\r\n  req.method === \"POST\"\r\n    ? post(req, res)\r\n    : req.method === \"PUT\"\r\n    ? console.log(\"PUT\")\r\n    : req.method === \"DELETE\"\r\n    ? console.log(\"DELETE\")\r\n    : req.method === \"GET\"\r\n    ? console.log(\"GET\")\r\n    : res.status(404).send(\"\");\r\n};\r\n"]},"metadata":{},"sourceType":"module"}