{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\msdtt\\\\OneDrive\\\\Documents\\\\amai_hr_next_js_hasura\\\\amai-hr\\\\pages\\\\test.js\";\nimport React from \"react\";\nvar __jsx = React.createElement;\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nimport { Component } from \"react\";\nimport { Editor, EditorState, RichUtils, convertToRaw, convertFromRaw } from \"draft-js\";\nexport default class App extends Component {\n  constructor(props) {\n    super(props);\n\n    _defineProperty(this, \"onClickEditor\", () => {\n      this.focus();\n      this.checkSelectedText();\n    });\n\n    _defineProperty(this, \"checkSelectedText\", () => {\n      if (false) {\n        const text = window.getSelection().toString();\n\n        if (text !== \"\") {\n          // 1-a Define the selection coordinates\n          this.setSelectionXY();\n        } else {\n          // Hide the toolbar if nothing is selected\n          this.setState({\n            showToolbar: false\n          });\n        }\n      }\n    });\n\n    _defineProperty(this, \"setSelectionXY\", () => {\n      var r = window.getSelection().getRangeAt(0).getBoundingClientRect();\n      var relative = document.body.parentNode.getBoundingClientRect(); // 2-a Set the selection coordinates in the state\n\n      this.setState({\n        selectionCoordinates: r,\n        windowWidth: relative.width,\n        selectionMeasures: {\n          w: r.width,\n          h: r.height\n        }\n      }, () => this.showToolbar());\n    });\n\n    _defineProperty(this, \"showToolbar\", () => {\n      this.setState({\n        showToolbar: true\n      }, () => this.measureToolbar());\n    });\n\n    _defineProperty(this, \"measureToolbar\", () => {\n      // 4-a Define the toolbar width and height, as it is now visible\n      this.setState({\n        toolbarMeasures: {\n          w: this.elemWidth,\n          h: this.elemHeight\n        }\n      }, () => this.setToolbarXY());\n    });\n\n    _defineProperty(this, \"setToolbarXY\", () => {\n      let coordinates = {};\n      const {\n        selectionMeasures,\n        selectionCoordinates,\n        toolbarMeasures,\n        windowWidth\n      } = this.state;\n      const hiddenTop = selectionCoordinates.y < toolbarMeasures.h;\n      const hiddenRight = windowWidth - selectionCoordinates.x < toolbarMeasures.w / 2;\n      const hiddenLeft = selectionCoordinates.x < toolbarMeasures.w / 2;\n      const normalX = selectionCoordinates.x - toolbarMeasures.w / 2 + selectionMeasures.w / 2;\n      const normalY = selectionCoordinates.y - toolbarMeasures.h;\n      const invertedY = selectionCoordinates.y + selectionMeasures.h;\n      const moveXToLeft = windowWidth - toolbarMeasures.w;\n      const moveXToRight = 0;\n      coordinates = {\n        x: normalX,\n        y: normalY\n      };\n\n      if (hiddenTop) {\n        coordinates.y = invertedY;\n      }\n\n      if (hiddenRight) {\n        coordinates.x = moveXToLeft;\n      }\n\n      if (hiddenLeft) {\n        coordinates.x = moveXToRight;\n      }\n\n      this.setState({\n        toolbarCoordinates: coordinates\n      });\n    });\n\n    _defineProperty(this, \"handleKeyCommand\", command => {\n      const {\n        editorState\n      } = this.state;\n      const newState = RichUtils.handleKeyCommand(editorState, command);\n\n      if (newState) {\n        this.onChange(newState);\n        return true;\n      }\n\n      return false;\n    });\n\n    _defineProperty(this, \"toggleToolbar\", inlineStyle => {\n      this.onChange(RichUtils.toggleInlineStyle(this.state.editorState, inlineStyle));\n    });\n\n    this.state = {\n      editorState: EditorState.createWithContent(convertFromRaw(initialData)),\n      showToolbar: false,\n      windowWidth: 0,\n      toolbarMeasures: {\n        w: 0,\n        h: 0\n      },\n      selectionMeasures: {\n        w: 0,\n        h: 0\n      },\n      selectionCoordinates: {\n        x: 0,\n        y: 0\n      },\n      toolbarCoordinates: {\n        x: 0,\n        y: 0\n      },\n      showRawData: false\n    };\n\n    this.focus = () => this.editor.focus();\n\n    this.onChange = editorState => this.setState({\n      editorState\n    });\n  }\n\n  render() {\n    const {\n      editorState\n    } = this.state; // Make sure we're not on the ssr\n\n    if (false) {\n      // Let's stick the toolbar to the selection\n      // when the window is resized\n      window.addEventListener(\"resize\", this.checkSelectedText);\n    }\n\n    const toolbarStyle = {\n      display: this.state.showToolbar ? \"block\" : \"none\",\n      backgroundColor: \"black\",\n      color: \"white\",\n      position: \"absolute\",\n      left: this.state.toolbarCoordinates.x,\n      top: this.state.toolbarCoordinates.y,\n      zIndex: 999,\n      padding: 10\n    };\n    return __jsx(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 185,\n        columnNumber: 7\n      }\n    }, __jsx(\"div\", {\n      ref: elem => {\n        this.elemWidth = elem ? elem.clientWidth : 0;\n        this.elemHeight = elem ? elem.clientHeight : 0;\n      },\n      style: toolbarStyle,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 186,\n        columnNumber: 9\n      }\n    }, __jsx(ToolBar, {\n      editorState: editorState,\n      onToggle: this.toggleToolbar,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 193,\n        columnNumber: 11\n      }\n    })), __jsx(\"div\", {\n      onClick: this.onClickEditor,\n      onBlur: this.checkSelectedText,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 195,\n        columnNumber: 9\n      }\n    }, __jsx(Editor, {\n      customStyleMap: styleMap,\n      editorState: editorState,\n      handleKeyCommand: this.handleKeyCommand,\n      onChange: this.onChange,\n      placeholder: \"Tell a story...\",\n      editorKey: \"foobar\",\n      spellCheck: false,\n      ref: element => {\n        this.editor = element;\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 196,\n        columnNumber: 11\n      }\n    })), __jsx(\"div\", {\n      style: {\n        marginTop: 40\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 209,\n        columnNumber: 9\n      }\n    }, __jsx(\"button\", {\n      onClick: () => this.setState({\n        showRawData: !this.state.showRawData\n      }),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 210,\n        columnNumber: 11\n      }\n    }, !this.state.showRawData ? \"Show\" : \"Hide\", \" Raw Data\"), __jsx(\"br\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 217,\n        columnNumber: 11\n      }\n    }), this.state.showRawData && JSON.stringify(convertToRaw(editorState.getCurrentContent()))));\n  }\n\n} // Custom overrides for each style\n\nconst styleMap = {\n  CODE: {\n    backgroundColor: \"rgba(0, 0, 0, 0.05)\",\n    fontFamily: '\"Inconsolata\", \"Menlo\", \"Consolas\", monospace',\n    fontSize: 16,\n    padding: 4\n  },\n  BOLD: {\n    color: \"#395296\",\n    fontWeight: \"bold\"\n  },\n  ANYCUSTOMSTYLE: {\n    color: \"#00e400\"\n  }\n};\n\nclass ToolbarButton extends Component {\n  constructor() {\n    super();\n\n    this.onToggle = e => {\n      e.preventDefault();\n      this.props.onToggle(this.props.style);\n    };\n  }\n\n  render() {\n    const buttonStyle = {\n      padding: 10\n    };\n    return __jsx(\"span\", {\n      onMouseDown: this.onToggle,\n      style: buttonStyle,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 257,\n        columnNumber: 7\n      }\n    }, this.props.label);\n  }\n\n}\n\nvar toolbarItems = [{\n  label: \"Bold\",\n  style: \"BOLD\"\n}, {\n  label: \"Italic\",\n  style: \"ITALIC\"\n}, {\n  label: \"Underline\",\n  style: \"UNDERLINE\"\n}, {\n  label: \"Code\",\n  style: \"CODE\"\n}, {\n  label: \"Surprise\",\n  style: \"ANYCUSTOMSTYLE\"\n}];\n\nconst ToolBar = props => {\n  var currentStyle = props.editorState.getCurrentInlineStyle();\n  return __jsx(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 275,\n      columnNumber: 5\n    }\n  }, toolbarItems.map(toolbarItem => __jsx(ToolbarButton, {\n    key: toolbarItem.label,\n    active: currentStyle.has(toolbarItem.style),\n    label: toolbarItem.label,\n    onToggle: props.onToggle,\n    style: toolbarItem.style,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 277,\n      columnNumber: 9\n    }\n  })));\n};\n\nconst initialData = {\n  blocks: [{\n    key: \"16d0k\",\n    text: \"You can edit this text.\",\n    type: \"unstyled\",\n    depth: 0,\n    inlineStyleRanges: [{\n      offset: 0,\n      length: 23,\n      style: \"BOLD\"\n    }],\n    entityRanges: [],\n    data: {}\n  }, {\n    key: \"98peq\",\n    text: \"\",\n    type: \"unstyled\",\n    depth: 0,\n    inlineStyleRanges: [],\n    entityRanges: [],\n    data: {}\n  }, {\n    key: \"ecmnc\",\n    text: \"Luke Skywalker has vanished. In his absence, the sinister FIRST ORDER has risen from the ashes of the Empire and will not rest until Skywalker, the last Jedi, has been destroyed.\",\n    type: \"unstyled\",\n    depth: 0,\n    inlineStyleRanges: [{\n      offset: 0,\n      length: 14,\n      style: \"BOLD\"\n    }, {\n      offset: 133,\n      length: 9,\n      style: \"BOLD\"\n    }],\n    entityRanges: [],\n    data: {}\n  }, {\n    key: \"fe2gn\",\n    text: \"\",\n    type: \"unstyled\",\n    depth: 0,\n    inlineStyleRanges: [],\n    entityRanges: [],\n    data: {}\n  }, {\n    key: \"4481k\",\n    text: \"With the support of the REPUBLIC, General Leia Organa leads a brave RESISTANCE. She is desperate to find her brother Luke and gain his help in restoring peace and justice to the galaxy.\",\n    type: \"unstyled\",\n    depth: 0,\n    inlineStyleRanges: [{\n      offset: 34,\n      length: 19,\n      style: \"BOLD\"\n    }, {\n      offset: 117,\n      length: 4,\n      style: \"BOLD\"\n    }, {\n      offset: 68,\n      length: 10,\n      style: \"ANYCUSTOMSTYLE\"\n    }],\n    entityRanges: [],\n    data: {}\n  }],\n  entityMap: {}\n};","map":{"version":3,"sources":["C:/Users/msdtt/OneDrive/Documents/amai_hr_next_js_hasura/amai-hr/pages/test.js"],"names":["Component","Editor","EditorState","RichUtils","convertToRaw","convertFromRaw","App","constructor","props","focus","checkSelectedText","text","window","getSelection","toString","setSelectionXY","setState","showToolbar","r","getRangeAt","getBoundingClientRect","relative","document","body","parentNode","selectionCoordinates","windowWidth","width","selectionMeasures","w","h","height","measureToolbar","toolbarMeasures","elemWidth","elemHeight","setToolbarXY","coordinates","state","hiddenTop","y","hiddenRight","x","hiddenLeft","normalX","normalY","invertedY","moveXToLeft","moveXToRight","toolbarCoordinates","command","editorState","newState","handleKeyCommand","onChange","inlineStyle","toggleInlineStyle","createWithContent","initialData","showRawData","editor","render","addEventListener","toolbarStyle","display","backgroundColor","color","position","left","top","zIndex","padding","elem","clientWidth","clientHeight","toggleToolbar","onClickEditor","styleMap","element","marginTop","JSON","stringify","getCurrentContent","CODE","fontFamily","fontSize","BOLD","fontWeight","ANYCUSTOMSTYLE","ToolbarButton","onToggle","e","preventDefault","style","buttonStyle","label","toolbarItems","ToolBar","currentStyle","getCurrentInlineStyle","map","toolbarItem","has","blocks","key","type","depth","inlineStyleRanges","offset","length","entityRanges","data","entityMap"],"mappings":"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","sourcesContent":["import { Component } from \"react\";\r\nimport {\r\n  Editor,\r\n  EditorState,\r\n  RichUtils,\r\n  convertToRaw,\r\n  convertFromRaw,\r\n} from \"draft-js\";\r\n\r\nexport default class App extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      editorState: EditorState.createWithContent(convertFromRaw(initialData)),\r\n      showToolbar: false,\r\n      windowWidth: 0,\r\n      toolbarMeasures: {\r\n        w: 0,\r\n        h: 0,\r\n      },\r\n      selectionMeasures: {\r\n        w: 0,\r\n        h: 0,\r\n      },\r\n      selectionCoordinates: {\r\n        x: 0,\r\n        y: 0,\r\n      },\r\n      toolbarCoordinates: {\r\n        x: 0,\r\n        y: 0,\r\n      },\r\n      showRawData: false,\r\n    };\r\n\r\n    this.focus = () => this.editor.focus();\r\n    this.onChange = (editorState) => this.setState({ editorState });\r\n  }\r\n\r\n  onClickEditor = () => {\r\n    this.focus();\r\n    this.checkSelectedText();\r\n  };\r\n\r\n  // 1- Check if some text is selected\r\n  checkSelectedText = () => {\r\n    if (typeof window !== \"undefined\") {\r\n      const text = window.getSelection().toString();\r\n      if (text !== \"\") {\r\n        // 1-a Define the selection coordinates\r\n        this.setSelectionXY();\r\n      } else {\r\n        // Hide the toolbar if nothing is selected\r\n        this.setState({\r\n          showToolbar: false,\r\n        });\r\n      }\r\n    }\r\n  };\r\n\r\n  // 2- Identify the selection coordinates\r\n  setSelectionXY = () => {\r\n    var r = window.getSelection().getRangeAt(0).getBoundingClientRect();\r\n    var relative = document.body.parentNode.getBoundingClientRect();\r\n    // 2-a Set the selection coordinates in the state\r\n    this.setState(\r\n      {\r\n        selectionCoordinates: r,\r\n        windowWidth: relative.width,\r\n        selectionMeasures: {\r\n          w: r.width,\r\n          h: r.height,\r\n        },\r\n      },\r\n      () => this.showToolbar()\r\n    );\r\n  };\r\n\r\n  // 3- Show the toolbar\r\n  showToolbar = () => {\r\n    this.setState(\r\n      {\r\n        showToolbar: true,\r\n      },\r\n      () => this.measureToolbar()\r\n    );\r\n  };\r\n\r\n  // 4- The toolbar was hidden until now\r\n  measureToolbar = () => {\r\n    // 4-a Define the toolbar width and height, as it is now visible\r\n    this.setState(\r\n      {\r\n        toolbarMeasures: {\r\n          w: this.elemWidth,\r\n          h: this.elemHeight,\r\n        },\r\n      },\r\n      () => this.setToolbarXY()\r\n    );\r\n  };\r\n\r\n  // 5- Now that we have all measures, define toolbar coordinates\r\n  setToolbarXY = () => {\r\n    let coordinates = {};\r\n\r\n    const {\r\n      selectionMeasures,\r\n      selectionCoordinates,\r\n      toolbarMeasures,\r\n      windowWidth,\r\n    } = this.state;\r\n\r\n    const hiddenTop = selectionCoordinates.y < toolbarMeasures.h;\r\n    const hiddenRight =\r\n      windowWidth - selectionCoordinates.x < toolbarMeasures.w / 2;\r\n    const hiddenLeft = selectionCoordinates.x < toolbarMeasures.w / 2;\r\n\r\n    const normalX =\r\n      selectionCoordinates.x - toolbarMeasures.w / 2 + selectionMeasures.w / 2;\r\n    const normalY = selectionCoordinates.y - toolbarMeasures.h;\r\n\r\n    const invertedY = selectionCoordinates.y + selectionMeasures.h;\r\n    const moveXToLeft = windowWidth - toolbarMeasures.w;\r\n    const moveXToRight = 0;\r\n\r\n    coordinates = {\r\n      x: normalX,\r\n      y: normalY,\r\n    };\r\n\r\n    if (hiddenTop) {\r\n      coordinates.y = invertedY;\r\n    }\r\n\r\n    if (hiddenRight) {\r\n      coordinates.x = moveXToLeft;\r\n    }\r\n\r\n    if (hiddenLeft) {\r\n      coordinates.x = moveXToRight;\r\n    }\r\n\r\n    this.setState({\r\n      toolbarCoordinates: coordinates,\r\n    });\r\n  };\r\n\r\n  handleKeyCommand = (command) => {\r\n    const { editorState } = this.state;\r\n    const newState = RichUtils.handleKeyCommand(editorState, command);\r\n    if (newState) {\r\n      this.onChange(newState);\r\n      return true;\r\n    }\r\n    return false;\r\n  };\r\n\r\n  toggleToolbar = (inlineStyle) => {\r\n    this.onChange(\r\n      RichUtils.toggleInlineStyle(this.state.editorState, inlineStyle)\r\n    );\r\n  };\r\n\r\n  render() {\r\n    const { editorState } = this.state;\r\n    // Make sure we're not on the ssr\r\n    if (typeof window !== \"undefined\") {\r\n      // Let's stick the toolbar to the selection\r\n      // when the window is resized\r\n      window.addEventListener(\"resize\", this.checkSelectedText);\r\n    }\r\n\r\n    const toolbarStyle = {\r\n      display: this.state.showToolbar ? \"block\" : \"none\",\r\n      backgroundColor: \"black\",\r\n      color: \"white\",\r\n      position: \"absolute\",\r\n      left: this.state.toolbarCoordinates.x,\r\n      top: this.state.toolbarCoordinates.y,\r\n      zIndex: 999,\r\n      padding: 10,\r\n    };\r\n    return (\r\n      <div>\r\n        <div\r\n          ref={(elem) => {\r\n            this.elemWidth = elem ? elem.clientWidth : 0;\r\n            this.elemHeight = elem ? elem.clientHeight : 0;\r\n          }}\r\n          style={toolbarStyle}\r\n        >\r\n          <ToolBar editorState={editorState} onToggle={this.toggleToolbar} />\r\n        </div>\r\n        <div onClick={this.onClickEditor} onBlur={this.checkSelectedText}>\r\n          <Editor\r\n            customStyleMap={styleMap}\r\n            editorState={editorState}\r\n            handleKeyCommand={this.handleKeyCommand}\r\n            onChange={this.onChange}\r\n            placeholder=\"Tell a story...\"\r\n            editorKey=\"foobar\"\r\n            spellCheck={false}\r\n            ref={(element) => {\r\n              this.editor = element;\r\n            }}\r\n          />\r\n        </div>\r\n        <div style={{ marginTop: 40 }}>\r\n          <button\r\n            onClick={() =>\r\n              this.setState({ showRawData: !this.state.showRawData })\r\n            }\r\n          >\r\n            {!this.state.showRawData ? \"Show\" : \"Hide\"} Raw Data\r\n          </button>\r\n          <br />\r\n          {this.state.showRawData &&\r\n            JSON.stringify(convertToRaw(editorState.getCurrentContent()))}\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\n// Custom overrides for each style\r\nconst styleMap = {\r\n  CODE: {\r\n    backgroundColor: \"rgba(0, 0, 0, 0.05)\",\r\n    fontFamily: '\"Inconsolata\", \"Menlo\", \"Consolas\", monospace',\r\n    fontSize: 16,\r\n    padding: 4,\r\n  },\r\n  BOLD: {\r\n    color: \"#395296\",\r\n    fontWeight: \"bold\",\r\n  },\r\n  ANYCUSTOMSTYLE: {\r\n    color: \"#00e400\",\r\n  },\r\n};\r\n\r\nclass ToolbarButton extends Component {\r\n  constructor() {\r\n    super();\r\n    this.onToggle = (e) => {\r\n      e.preventDefault();\r\n      this.props.onToggle(this.props.style);\r\n    };\r\n  }\r\n\r\n  render() {\r\n    const buttonStyle = {\r\n      padding: 10,\r\n    };\r\n    return (\r\n      <span onMouseDown={this.onToggle} style={buttonStyle}>\r\n        {this.props.label}\r\n      </span>\r\n    );\r\n  }\r\n}\r\n\r\nvar toolbarItems = [\r\n  { label: \"Bold\", style: \"BOLD\" },\r\n  { label: \"Italic\", style: \"ITALIC\" },\r\n  { label: \"Underline\", style: \"UNDERLINE\" },\r\n  { label: \"Code\", style: \"CODE\" },\r\n  { label: \"Surprise\", style: \"ANYCUSTOMSTYLE\" },\r\n];\r\n\r\nconst ToolBar = (props) => {\r\n  var currentStyle = props.editorState.getCurrentInlineStyle();\r\n  return (\r\n    <div>\r\n      {toolbarItems.map((toolbarItem) => (\r\n        <ToolbarButton\r\n          key={toolbarItem.label}\r\n          active={currentStyle.has(toolbarItem.style)}\r\n          label={toolbarItem.label}\r\n          onToggle={props.onToggle}\r\n          style={toolbarItem.style}\r\n        />\r\n      ))}\r\n    </div>\r\n  );\r\n};\r\n\r\nconst initialData = {\r\n  blocks: [\r\n    {\r\n      key: \"16d0k\",\r\n      text: \"You can edit this text.\",\r\n      type: \"unstyled\",\r\n      depth: 0,\r\n      inlineStyleRanges: [{ offset: 0, length: 23, style: \"BOLD\" }],\r\n      entityRanges: [],\r\n      data: {},\r\n    },\r\n    {\r\n      key: \"98peq\",\r\n      text: \"\",\r\n      type: \"unstyled\",\r\n      depth: 0,\r\n      inlineStyleRanges: [],\r\n      entityRanges: [],\r\n      data: {},\r\n    },\r\n    {\r\n      key: \"ecmnc\",\r\n      text: \"Luke Skywalker has vanished. In his absence, the sinister FIRST ORDER has risen from the ashes of the Empire and will not rest until Skywalker, the last Jedi, has been destroyed.\",\r\n      type: \"unstyled\",\r\n      depth: 0,\r\n      inlineStyleRanges: [\r\n        { offset: 0, length: 14, style: \"BOLD\" },\r\n        { offset: 133, length: 9, style: \"BOLD\" },\r\n      ],\r\n      entityRanges: [],\r\n      data: {},\r\n    },\r\n    {\r\n      key: \"fe2gn\",\r\n      text: \"\",\r\n      type: \"unstyled\",\r\n      depth: 0,\r\n      inlineStyleRanges: [],\r\n      entityRanges: [],\r\n      data: {},\r\n    },\r\n    {\r\n      key: \"4481k\",\r\n      text: \"With the support of the REPUBLIC, General Leia Organa leads a brave RESISTANCE. She is desperate to find her brother Luke and gain his help in restoring peace and justice to the galaxy.\",\r\n      type: \"unstyled\",\r\n      depth: 0,\r\n      inlineStyleRanges: [\r\n        { offset: 34, length: 19, style: \"BOLD\" },\r\n        { offset: 117, length: 4, style: \"BOLD\" },\r\n        { offset: 68, length: 10, style: \"ANYCUSTOMSTYLE\" },\r\n      ],\r\n      entityRanges: [],\r\n      data: {},\r\n    },\r\n  ],\r\n  entityMap: {},\r\n};\r\n"]},"metadata":{},"sourceType":"module"}