{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\msdtt\\\\OneDrive\\\\Documents\\\\amai_hr_next_js_hasura\\\\amai-hr\\\\pages\\\\Project\\\\[id].js\";\nimport React from \"react\";\nvar __jsx = React.createElement;\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) { symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); } keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nimport { useRouter } from \"next/router\";\nimport useSWR from \"swr\";\nimport { useForm } from \"react-hook-form\";\nimport Link from \"next/link\";\nimport { gql, hasuraUserClient } from \"../../lib/hasura-user-client\";\nimport { useAuthState, useAuthDispatch } from \"../../context/auth\";\nimport { useEffect } from \"react\";\nimport { TextField } from \"@material-ui/core\";\nimport { Form } from \"react-bootstrap\";\nconst today = new Date().toISOString().substring(0, 19);\nconst getProjectsIds = gql`\n  {\n    Project {\n      id\n      Description\n      created_at\n      Title\n      delivery_date\n      assigned\n      contact_date\n      company_name\n      additional_inf\n      type\n      file\n      income\n    }\n  }\n`;\nconst GetProjectByID = gql`\n  query GetProjectByID($id: Int!) {\n    Project_by_pk(id: $id) {\n      id\n      Description\n      created_at\n      Title\n      delivery_date\n      assigned\n      contact_date\n      company_name\n      additional_inf\n      type\n      file\n      income\n    }\n  }\n`;\nconst GetProjectByUser = gql`\n  query User($id: Int!) {\n    User(where: { project_id: { _is_null: true } }) {\n      id\n      Name\n    }\n  }\n`;\nexport const getStaticPaths = async () => {\n  const hasura = hasuraUserClient();\n  const {\n    Project\n  } = await hasura.request(getProjectsIds);\n  return {\n    paths: Project.map(({\n      id\n    }) => ({\n      params: {\n        id: id.toString()\n      }\n    })),\n    fallback: false\n  };\n};\nexport const getStaticProps = async ({\n  params\n}) => {\n  const hasura = hasuraUserClient();\n  const {\n    id\n  } = params;\n  const initialData = await hasura.request(GetProjectByID, {\n    id\n  });\n  return {\n    props: {\n      initialData\n    },\n    revalidate: 1\n  };\n};\nconst UpdateProject = gql`\n  mutation update_Candidate_by_pk(\n    $id: Int!\n    $Title: String!\n    $Description: String!\n    $company_name: String!\n    $created_at: String!\n    $delivery_date: String!\n    $assigned: String!\n    $contact_date: String!\n    $company_name: String!\n    $additional_inf: String!\n    $type: String!\n    $file: String!\n    $income: String!\n  ) {\n    update_Project_by_pk(\n      pk_columns: { id: $id }\n      _set: {\n        Title: $Title\n        Description: $Description\n        company_name: $company_name\n        created_at: $created_at\n        Title: $Title\n        delivery_date: $delivery_date\n        assigned: $assigned\n        contact_date: $contact_date\n        company_name: $company_name\n        additional_inf: $additional_inf\n        type: $type\n        file: $file\n        income: $income\n      }\n    ) {\n      id\n      Title\n      Description\n      created_at\n      delivery_date\n      assigned\n      contact_date\n      company_name\n      additional_inf\n      type\n      file\n      income\n    }\n  }\n`;\nexport default function ProjectEdit({\n  initialData\n}) {\n  const hasura = hasuraUserClient();\n  const {\n    query\n  } = useRouter();\n  const router = useRouter();\n  const {\n    isAuthenticated,\n    user\n  } = useAuthState();\n  useEffect(() => {\n    if (!isAuthenticated) router.push(\"/\");\n  }, [isAuthenticated]);\n  const {\n    id\n  } = query;\n\n  const _useForm = useForm(),\n        {\n    handleSubmit,\n    register,\n    control,\n    errors,\n    formState: {\n      isSubmitting\n    }\n  } = _useForm,\n        defaultValues = Object.assign({}, _useForm.defaultValues);\n\n  const {\n    data,\n    mutate\n  } = useSWR([GetProjectByID, id], (query, id) => hasura.request(query, {\n    id\n  }), {\n    initialData,\n    revalidateOnMount: true\n  });\n\n  const uploadFileToClient = event => {\n    if (event.target.files && event.target.files[0]) {\n      const i = event.target.files[0];\n      setFile(i);\n      setCreateObjectURL(URL.createObjectURL(i));\n    }\n  };\n\n  const onSubmit = async ({\n    Title,\n    Description,\n    company_name\n  }) => {\n    try {\n      const id = data.Project_by_pk.id;\n      console.log(id);\n      const {\n        update_Project_by_pk\n      } = await hasura.request(UpdateProject, {\n        id,\n        Title,\n        Description,\n        company_name\n      });\n      mutate(_objectSpread(_objectSpread({}, data), update_Project_by_pk));\n      router.push(`/Project/List`);\n    } catch (err) {\n      console.log(err);\n    }\n  };\n\n  return __jsx(\"div\", {\n    className: \"page-content-wrapper\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 190,\n      columnNumber: 5\n    }\n  }, __jsx(\"div\", {\n    className: \"page-content\",\n    style: {\n      minHeight: 1500\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 191,\n      columnNumber: 7\n    }\n  }, __jsx(\"div\", {\n    class: \"profile-content\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 192,\n      columnNumber: 9\n    }\n  }, __jsx(\"div\", {\n    class: \"row\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 193,\n      columnNumber: 11\n    }\n  }, __jsx(\"div\", {\n    class: \"col-md-12\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 194,\n      columnNumber: 13\n    }\n  }, __jsx(\"div\", {\n    class: \"portlet light \",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 195,\n      columnNumber: 15\n    }\n  }, __jsx(\"div\", {\n    class: \"portlet-body\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 196,\n      columnNumber: 17\n    }\n  }, __jsx(\"div\", {\n    class: \"tab-content\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 197,\n      columnNumber: 19\n    }\n  }, __jsx(\"div\", {\n    class: \"tab-pane active\",\n    id: \"tab_1_1\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 198,\n      columnNumber: 21\n    }\n  }, __jsx(\"form\", {\n    onSubmit: handleSubmit(onSubmit),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 199,\n      columnNumber: 23\n    }\n  }, \" \", __jsx(\"div\", {\n    class: \"form-group\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 201,\n      columnNumber: 25\n    }\n  }, __jsx(\"label\", {\n    class: \"control-label\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 202,\n      columnNumber: 27\n    }\n  }, \"Client\"), __jsx(\"input\", {\n    defaultValue: data.Project_by_pk.company_name,\n    name: \"company_name\",\n    id: \"company_name\",\n    type: \"text\",\n    placeholder: \"Client\",\n    class: \"form-control\",\n    ref: register,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 203,\n      columnNumber: 27\n    }\n  }), \" \"), __jsx(\"div\", {\n    class: \"form-group\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 213,\n      columnNumber: 25\n    }\n  }, __jsx(\"label\", {\n    class: \"control-label\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 214,\n      columnNumber: 27\n    }\n  }, \"Project Title\"), __jsx(\"input\", {\n    defaultValue: data.Project_by_pk.Title,\n    name: \"Title\",\n    id: \"Title\",\n    type: \"text\",\n    placeholder: \"Project Title\",\n    class: \"form-control\",\n    ref: register,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 215,\n      columnNumber: 27\n    }\n  }), \" \"), __jsx(\"div\", {\n    class: \"form-group\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 225,\n      columnNumber: 25\n    }\n  }, __jsx(\"label\", {\n    class: \"control-label\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 226,\n      columnNumber: 27\n    }\n  }, \"Project Description\"), __jsx(\"textarea\", {\n    defaultValue: data.Project_by_pk.Description,\n    name: \"Description\",\n    id: \"Description\",\n    type: \"textarea\",\n    placeholder: \"Description\",\n    class: \"form-control\",\n    ref: register,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 229,\n      columnNumber: 27\n    }\n  }), \" \"), \" \", __jsx(\"div\", {\n    class: \"form-group\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 239,\n      columnNumber: 25\n    }\n  }, __jsx(\"label\", {\n    class: \"control-label\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 240,\n      columnNumber: 27\n    }\n  }, \"additonal info\"), __jsx(\"textarea\", {\n    name: \"additional_inf\",\n    id: \"additional_inf\",\n    type: \"textarea\",\n    placeholder: \"additonal info\",\n    class: \"form-control\",\n    ref: register,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 241,\n      columnNumber: 27\n    }\n  }), \" \"), \" \", __jsx(\"div\", {\n    class: \"form-group\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 250,\n      columnNumber: 25\n    }\n  }, __jsx(\"label\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 251,\n      columnNumber: 27\n    }\n  }, \"Income\"), __jsx(\"div\", {\n    class: \"form-group\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 252,\n      columnNumber: 27\n    }\n  }, __jsx(\"input\", {\n    name: \"income\",\n    class: \"form-control\",\n    id: \"income\",\n    type: \"text\",\n    ref: register,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 253,\n      columnNumber: 29\n    }\n  }), __jsx(\"span\", {\n    class: \"help-block\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 260,\n      columnNumber: 29\n    }\n  }, \" \", \"123456 => \\u20AC ___.__1.234,56\", \" \"))), \" \", __jsx(\"div\", {\n    class: \"form-group\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 266,\n      columnNumber: 25\n    }\n  }, __jsx(\"label\", {\n    class: \"control-label\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 267,\n      columnNumber: 27\n    }\n  }, \"type\"), __jsx(\"input\", {\n    name: \"type\",\n    id: \"type\",\n    type: \"text\",\n    placeholder: \"type\",\n    class: \"form-control\",\n    ref: register,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 268,\n      columnNumber: 27\n    }\n  }), \" \"), __jsx(\"div\", {\n    class: \"form-group\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 277,\n      columnNumber: 25\n    }\n  }, __jsx(\"label\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 278,\n      columnNumber: 27\n    }\n  }, \"starting date\"), \" \", __jsx(\"br\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 278,\n      columnNumber: 56\n    }\n  }), __jsx(TextField, {\n    id: \"datetime\",\n    name: \"datetime\",\n    type: \"date\",\n    defaultValue: today,\n    inputRef: register,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 279,\n      columnNumber: 27\n    }\n  })), __jsx(\"div\", {\n    class: \"form-group\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 287,\n      columnNumber: 25\n    }\n  }, __jsx(\"label\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 288,\n      columnNumber: 27\n    }\n  }, \"expected delievry date\"), \" \", __jsx(\"br\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 288,\n      columnNumber: 65\n    }\n  }), __jsx(TextField, {\n    id: \"datetime\",\n    name: \"datetime\",\n    type: \"date\",\n    defaultValue: today,\n    inputRef: register,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 289,\n      columnNumber: 27\n    }\n  })), \" \", __jsx(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 297,\n      columnNumber: 25\n    }\n  }, \" \", __jsx(Form.Group, {\n    controlId: \"formFile\",\n    className: \"mb-3\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 299,\n      columnNumber: 27\n    }\n  }, __jsx(Form.Control, {\n    name: \"File\",\n    type: \"file\",\n    onChange: uploadFileToClient,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 300,\n      columnNumber: 29\n    }\n  }))), __jsx(\"br\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 307,\n      columnNumber: 25\n    }\n  }), __jsx(\"br\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 308,\n      columnNumber: 25\n    }\n  }), __jsx(\"div\", {\n    class: \"margiv-top-10\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 309,\n      columnNumber: 25\n    }\n  }, __jsx(\"button\", {\n    type: \"submit\",\n    class: \"btn green\",\n    disabled: isSubmitting,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 310,\n      columnNumber: 27\n    }\n  }, \" \", \"Save Changes\", \" \"), __jsx(\"a\", {\n    href: \"#\",\n    class: \"btn default\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 318,\n      columnNumber: 27\n    }\n  }, \" \", \"Cancel\", \" \"))))))))))), \" \");\n}","map":{"version":3,"sources":["C:/Users/msdtt/OneDrive/Documents/amai_hr_next_js_hasura/amai-hr/pages/Project/[id].js"],"names":["useRouter","useSWR","useForm","Link","gql","hasuraUserClient","useAuthState","useAuthDispatch","useEffect","TextField","Form","today","Date","toISOString","substring","getProjectsIds","GetProjectByID","GetProjectByUser","getStaticPaths","hasura","Project","request","paths","map","id","params","toString","fallback","getStaticProps","initialData","props","revalidate","UpdateProject","ProjectEdit","query","router","isAuthenticated","user","push","handleSubmit","register","control","errors","formState","isSubmitting","defaultValues","data","mutate","revalidateOnMount","uploadFileToClient","event","target","files","i","setFile","setCreateObjectURL","URL","createObjectURL","onSubmit","Title","Description","company_name","Project_by_pk","console","log","update_Project_by_pk","err","minHeight"],"mappings":"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","sourcesContent":["import { useRouter } from \"next/router\";\r\nimport useSWR from \"swr\";\r\nimport { useForm } from \"react-hook-form\";\r\nimport Link from \"next/link\";\r\nimport { gql, hasuraUserClient } from \"../../lib/hasura-user-client\";\r\nimport { useAuthState, useAuthDispatch } from \"../../context/auth\";\r\nimport { useEffect } from \"react\";\r\nimport { TextField } from \"@material-ui/core\";\r\nimport { Form } from \"react-bootstrap\";\r\n\r\nconst today = new Date().toISOString().substring(0, 19);\r\n\r\nconst getProjectsIds = gql`\r\n  {\r\n    Project {\r\n      id\r\n      Description\r\n      created_at\r\n      Title\r\n      delivery_date\r\n      assigned\r\n      contact_date\r\n      company_name\r\n      additional_inf\r\n      type\r\n      file\r\n      income\r\n    }\r\n  }\r\n`;\r\n\r\nconst GetProjectByID = gql`\r\n  query GetProjectByID($id: Int!) {\r\n    Project_by_pk(id: $id) {\r\n      id\r\n      Description\r\n      created_at\r\n      Title\r\n      delivery_date\r\n      assigned\r\n      contact_date\r\n      company_name\r\n      additional_inf\r\n      type\r\n      file\r\n      income\r\n    }\r\n  }\r\n`;\r\nconst GetProjectByUser = gql`\r\n  query User($id: Int!) {\r\n    User(where: { project_id: { _is_null: true } }) {\r\n      id\r\n      Name\r\n    }\r\n  }\r\n`;\r\nexport const getStaticPaths = async () => {\r\n  const hasura = hasuraUserClient();\r\n\r\n  const { Project } = await hasura.request(getProjectsIds);\r\n\r\n  return {\r\n    paths: Project.map(({ id }) => ({\r\n      params: {\r\n        id: id.toString(),\r\n      },\r\n    })),\r\n    fallback: false,\r\n  };\r\n};\r\n\r\nexport const getStaticProps = async ({ params }) => {\r\n  const hasura = hasuraUserClient();\r\n  const { id } = params;\r\n\r\n  const initialData = await hasura.request(GetProjectByID, { id });\r\n\r\n  return {\r\n    props: {\r\n      initialData,\r\n    },\r\n    revalidate: 1,\r\n  };\r\n};\r\nconst UpdateProject = gql`\r\n  mutation update_Candidate_by_pk(\r\n    $id: Int!\r\n    $Title: String!\r\n    $Description: String!\r\n    $company_name: String!\r\n    $created_at: String!\r\n    $delivery_date: String!\r\n    $assigned: String!\r\n    $contact_date: String!\r\n    $company_name: String!\r\n    $additional_inf: String!\r\n    $type: String!\r\n    $file: String!\r\n    $income: String!\r\n  ) {\r\n    update_Project_by_pk(\r\n      pk_columns: { id: $id }\r\n      _set: {\r\n        Title: $Title\r\n        Description: $Description\r\n        company_name: $company_name\r\n        created_at: $created_at\r\n        Title: $Title\r\n        delivery_date: $delivery_date\r\n        assigned: $assigned\r\n        contact_date: $contact_date\r\n        company_name: $company_name\r\n        additional_inf: $additional_inf\r\n        type: $type\r\n        file: $file\r\n        income: $income\r\n      }\r\n    ) {\r\n      id\r\n      Title\r\n      Description\r\n      created_at\r\n      delivery_date\r\n      assigned\r\n      contact_date\r\n      company_name\r\n      additional_inf\r\n      type\r\n      file\r\n      income\r\n    }\r\n  }\r\n`;\r\nexport default function ProjectEdit({ initialData }) {\r\n  const hasura = hasuraUserClient();\r\n  const { query } = useRouter();\r\n  const router = useRouter();\r\n  const { isAuthenticated, user } = useAuthState();\r\n\r\n  useEffect(() => {\r\n    if (!isAuthenticated) router.push(\"/\");\r\n  }, [isAuthenticated]);\r\n\r\n  const { id } = query;\r\n  const {\r\n    handleSubmit,\r\n    register,\r\n    control,\r\n    errors,\r\n    formState: { isSubmitting },\r\n    defaultValues: { ...defaultValues },\r\n  } = useForm();\r\n  const { data, mutate } = useSWR(\r\n    [GetProjectByID, id],\r\n    (query, id) => hasura.request(query, { id }),\r\n    {\r\n      initialData,\r\n      revalidateOnMount: true,\r\n    }\r\n  );\r\n  const uploadFileToClient = (event) => {\r\n    if (event.target.files && event.target.files[0]) {\r\n      const i = event.target.files[0];\r\n      setFile(i);\r\n      setCreateObjectURL(URL.createObjectURL(i));\r\n    }\r\n  };\r\n  const onSubmit = async ({ Title, Description, company_name }) => {\r\n    try {\r\n      const id = data.Project_by_pk.id;\r\n      console.log(id);\r\n      const { update_Project_by_pk } = await hasura.request(UpdateProject, {\r\n        id,\r\n        Title,\r\n        Description,\r\n        company_name,\r\n      });\r\n\r\n      mutate({\r\n        ...data,\r\n        ...update_Project_by_pk,\r\n      });\r\n      router.push(`/Project/List`);\r\n    } catch (err) {\r\n      console.log(err);\r\n    }\r\n  };\r\n  return (\r\n    <div className=\"page-content-wrapper\">\r\n      <div className=\"page-content\" style={{ minHeight: 1500 }}>\r\n        <div class=\"profile-content\">\r\n          <div class=\"row\">\r\n            <div class=\"col-md-12\">\r\n              <div class=\"portlet light \">\r\n                <div class=\"portlet-body\">\r\n                  <div class=\"tab-content\">\r\n                    <div class=\"tab-pane active\" id=\"tab_1_1\">\r\n                      <form onSubmit={handleSubmit(onSubmit)}>\r\n                        {\" \"}\r\n                        <div class=\"form-group\">\r\n                          <label class=\"control-label\">Client</label>\r\n                          <input\r\n                            defaultValue={data.Project_by_pk.company_name}\r\n                            name=\"company_name\"\r\n                            id=\"company_name\"\r\n                            type=\"text\"\r\n                            placeholder=\"Client\"\r\n                            class=\"form-control\"\r\n                            ref={register}\r\n                          />{\" \"}\r\n                        </div>\r\n                        <div class=\"form-group\">\r\n                          <label class=\"control-label\">Project Title</label>\r\n                          <input\r\n                            defaultValue={data.Project_by_pk.Title}\r\n                            name=\"Title\"\r\n                            id=\"Title\"\r\n                            type=\"text\"\r\n                            placeholder=\"Project Title\"\r\n                            class=\"form-control\"\r\n                            ref={register}\r\n                          />{\" \"}\r\n                        </div>\r\n                        <div class=\"form-group\">\r\n                          <label class=\"control-label\">\r\n                            Project Description\r\n                          </label>\r\n                          <textarea\r\n                            defaultValue={data.Project_by_pk.Description}\r\n                            name=\"Description\"\r\n                            id=\"Description\"\r\n                            type=\"textarea\"\r\n                            placeholder=\"Description\"\r\n                            class=\"form-control\"\r\n                            ref={register}\r\n                          />{\" \"}\r\n                        </div>{\" \"}\r\n                        <div class=\"form-group\">\r\n                          <label class=\"control-label\">additonal info</label>\r\n                          <textarea\r\n                            name=\"additional_inf\"\r\n                            id=\"additional_inf\"\r\n                            type=\"textarea\"\r\n                            placeholder=\"additonal info\"\r\n                            class=\"form-control\"\r\n                            ref={register}\r\n                          />{\" \"}\r\n                        </div>{\" \"}\r\n                        <div class=\"form-group\">\r\n                          <label>Income</label>\r\n                          <div class=\"form-group\">\r\n                            <input\r\n                              name=\"income\"\r\n                              class=\"form-control\"\r\n                              id=\"income\"\r\n                              type=\"text\"\r\n                              ref={register}\r\n                            />\r\n                            <span class=\"help-block\">\r\n                              {\" \"}\r\n                              123456 => € ___.__1.234,56{\" \"}\r\n                            </span>\r\n                          </div>\r\n                        </div>{\" \"}\r\n                        <div class=\"form-group\">\r\n                          <label class=\"control-label\">type</label>\r\n                          <input\r\n                            name=\"type\"\r\n                            id=\"type\"\r\n                            type=\"text\"\r\n                            placeholder=\"type\"\r\n                            class=\"form-control\"\r\n                            ref={register}\r\n                          />{\" \"}\r\n                        </div>\r\n                        <div class=\"form-group\">\r\n                          <label>starting date</label> <br />\r\n                          <TextField\r\n                            id=\"datetime\"\r\n                            name=\"datetime\"\r\n                            type=\"date\"\r\n                            defaultValue={today}\r\n                            inputRef={register}\r\n                          />\r\n                        </div>\r\n                        <div class=\"form-group\">\r\n                          <label>expected delievry date</label> <br />\r\n                          <TextField\r\n                            id=\"datetime\"\r\n                            name=\"datetime\"\r\n                            type=\"date\"\r\n                            defaultValue={today}\r\n                            inputRef={register}\r\n                          />\r\n                        </div>{\" \"}\r\n                        <div>\r\n                          {\" \"}\r\n                          <Form.Group controlId=\"formFile\" className=\"mb-3\">\r\n                            <Form.Control\r\n                              name=\"File\"\r\n                              type=\"file\"\r\n                              onChange={uploadFileToClient}\r\n                            />\r\n                          </Form.Group>\r\n                        </div>\r\n                        <br />\r\n                        <br />\r\n                        <div class=\"margiv-top-10\">\r\n                          <button\r\n                            type=\"submit\"\r\n                            class=\"btn green\"\r\n                            disabled={isSubmitting}\r\n                          >\r\n                            {\" \"}\r\n                            Save Changes{\" \"}\r\n                          </button>\r\n                          <a href=\"#\" class=\"btn default\">\r\n                            {\" \"}\r\n                            Cancel{\" \"}\r\n                          </a>\r\n                        </div>\r\n                      </form>\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>{\" \"}\r\n    </div>\r\n  );\r\n}\r\n"]},"metadata":{},"sourceType":"module"}