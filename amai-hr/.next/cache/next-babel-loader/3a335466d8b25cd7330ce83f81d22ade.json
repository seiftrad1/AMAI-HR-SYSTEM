{"ast":null,"code":"import _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _taggedTemplateLiteral from \"@babel/runtime/helpers/esm/taggedTemplateLiteral\";\n\nvar _templateObject, _templateObject2;\n\nimport React from \"react\";\nvar __jsx = React.createElement;\nimport { useState, useEffect } from \"react\";\nimport { useRouter } from \"next/router\";\nimport { useForm, Controller } from \"react-hook-form\";\nimport Layout from \"./Components/Layout\";\nimport startOfToday from \"date-fns/startOfToday\";\nimport { useAuthState } from \"../context/auth\";\nimport { gql } from \"../lib/hasura-admin-client\";\nimport { hasuraUserClient } from \"../lib/hasura-user-client\";\nvar from = new Date(startOfToday()).toISOString();\nvar GetTodos = gql(_templateObject || (_templateObject = _taggedTemplateLiteral([\"\\n  {\\n    Todo {\\n      Description\\n      Name\\n      Date\\n      User {\\n        Name\\n        id\\n      }\\n    }\\n  }\\n\"])));\nvar InsertTask = gql(_templateObject2 || (_templateObject2 = _taggedTemplateLiteral([\"\\n  mutation InsertTask(\\n    $Description: String!\\n    $Name: String!\\n    $from: timestamptz!\\n    $user_id: Int!\\n  ) {\\n    insert_Todo_one(\\n      object: {\\n        Description: $Description\\n        Name: $Name\\n        Date: $from\\n        user_id: $user_id\\n      }\\n    ) {\\n      Description\\n      Date\\n      Name\\n      user_id\\n    }\\n  }\\n\"])));\nexport var __N_SSG = true;\nexport default function Todos(_ref) {\n  var User = _ref.User;\n  var router = useRouter();\n\n  var _useAuthState = useAuthState(),\n      isAuthenticated = _useAuthState.isAuthenticated,\n      user = _useAuthState.user;\n\n  var hasura = hasuraUserClient();\n\n  var _useForm = useForm(),\n      handleSubmit = _useForm.handleSubmit,\n      register = _useForm.register,\n      control = _useForm.control,\n      errors = _useForm.errors,\n      isSubmitting = _useForm.formState.isSubmitting;\n\n  useEffect(function () {\n    if (!isAuthenticated) router.push(\"/\");\n  }, [isAuthenticated]);\n  if (!isAuthenticated) return null;\n\n  var onSubmit = /*#__PURE__*/function () {\n    var _ref3 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(_ref2) {\n      var Description, Name, user_id, _yield$hasura$request, insert_Todo_one;\n\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              Description = _ref2.Description, Name = _ref2.Name, user_id = _ref2.user_id;\n              console.log(from);\n              _context.prev = 2;\n              _context.next = 5;\n              return hasura.request(InsertTask, {\n                Description: Description,\n                from: from,\n                Name: Name,\n                user_id: user_id\n              });\n\n            case 5:\n              _yield$hasura$request = _context.sent;\n              insert_Todo_one = _yield$hasura$request.insert_Todo_one;\n              router.push(\"/CandidatList\");\n              _context.next = 13;\n              break;\n\n            case 10:\n              _context.prev = 10;\n              _context.t0 = _context[\"catch\"](2);\n              console.log(_context.t0);\n\n            case 13:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee, null, [[2, 10]]);\n    }));\n\n    return function onSubmit(_x) {\n      return _ref3.apply(this, arguments);\n    };\n  }();\n\n  return __jsx(React.Fragment, null, __jsx(Layout, null, __jsx(\"div\", {\n    className: \"page-content-wrapper\"\n  }, __jsx(\"div\", {\n    className: \"page-content\",\n    style: {\n      minHeight: 1500\n    }\n  }, __jsx(\"div\", {\n    \"class\": \"profile-content\"\n  }, __jsx(\"div\", {\n    \"class\": \"row\"\n  }, __jsx(\"div\", {\n    \"class\": \"col-md-12\"\n  }, __jsx(\"div\", {\n    \"class\": \"portlet light \"\n  }, __jsx(\"div\", {\n    \"class\": \"portlet-body\"\n  }, __jsx(\"div\", {\n    \"class\": \"tab-content\"\n  }, __jsx(\"div\", {\n    \"class\": \"tab-pane active\",\n    id: \"tab_1_1\"\n  }, __jsx(\"form\", {\n    onSubmit: handleSubmit(onSubmit)\n  }, __jsx(\"div\", {\n    \"class\": \"form-group\"\n  }, __jsx(\"label\", {\n    \"class\": \"control-label\"\n  }, \"Name\"), __jsx(\"input\", {\n    name: \"Name\",\n    id: \"Name\",\n    type: \"text\",\n    placeholder: \"First Name\",\n    \"class\": \"form-control\",\n    ref: register({\n      required: \"You must select a category for your thread\"\n    })\n  }), \" \"), __jsx(\"div\", {\n    \"class\": \"form-group\"\n  }, __jsx(\"label\", {\n    \"class\": \"control-label\"\n  }, \"Description\"), __jsx(\"input\", {\n    name: \"Description\",\n    id: \"Description\",\n    type: \"text\",\n    placeholder: \"Last Name\",\n    \"class\": \"form-control\",\n    ref: register({\n      required: \"You must select a category for your thread\"\n    })\n  }), \" \"), __jsx(\"select\", {\n    name: \"user_id\",\n    id: \"user_id\",\n    ref: register({\n      required: \"You must select a category for your thread\"\n    }),\n    className: \"appearance-none bg-transparent w-full\"\n  }, User.map(function (_ref4) {\n    var id = _ref4.id,\n        Name = _ref4.Name;\n    return __jsx(React.Fragment, {\n      key: id\n    }, __jsx(\"option\", {\n      value: id\n    }, Name));\n  })), __jsx(\"div\", {\n    \"class\": \"margiv-top-10\"\n  }, __jsx(\"button\", {\n    type: \"submit\",\n    \"class\": \"btn green\",\n    disabled: isSubmitting\n  }, \" \", \"Save Changes\", \" \"), __jsx(\"a\", {\n    href: \"#\",\n    \"class\": \"btn default\"\n  }, \" \", \"Cancel\", \" \"))))))))))), \" \")));\n}","map":null,"metadata":{},"sourceType":"module"}